# cd /usr/ports/www/nginx
# make config
# make install clean


# nginx -t
# sysrc nginx_enable=yes
или
# echo 'nginx_enable="YES"' >> /etc/rc.conf
# service nginx start

# mcedit /usr/local/etc/nginx/nginx.conf
---
user www;
worker_processes 1;

pid /var/run/nginx.pid;
error_log /var/log/nginx-error.log warn;

events {
worker_connections 1024;
use kqueue;
}

http {
include mime.types;
default_type application/octet-stream;

log_format main '$remote_addr - $remote_user [$time_local] '
'"$request" $status $bytes_sent '
'"$http_referer" "$http_user_agent" '
'"$gzip_ratio"';

sendfile on;
tcp_nopush on;
tcp_nodelay on;
keepalive_timeout 65;
server_tokens off;

fastcgi_intercept_errors on;
client_max_body_size 50m;

server {
listen 80;
server_name www.site.ru;
rewrite ^ http://site.ru$request_uri? permanent;
}

server {
  listen 80;
  server_name site.ru;
  root /usr/local/www/site/public_html;
  index index.php index.html index.htm;
  access_log /usr/local/www/site/log/access.log main;
  error_log /usr/local/www/site/log/error.log;

  location / {
    try_files $uri $uri/ /index.php?$args;
  }

  location ~* ^.+.(js|css|png|jpg|jpeg|gif|ico)$ {
    access_log off;
    expires max;
  }

  location ~ \.php$ {
    fastcgi_pass   unix:/tmp/php-fpm.sock;
    fastcgi_index index.php;

    fastcgi_param DOCUMENT_ROOT /web/sites/site1.ru/www/;
    fastcgi_param SCRIPT_FILENAME /web/sites/site1.ru/www$fastcgi_script_name;
    fastcgi_param PATH_TRANSLATED /web/sites/site1.ru/www$fastcgi_script_name;

    include fastcgi_params;
    fastcgi_param QUERY_STRING $query_string;
    fastcgi_param REQUEST_METHOD $request_method;
    fastcgi_param CONTENT_TYPE $content_type;
    fastcgi_param CONTENT_LENGTH $content_length;
    fastcgi_intercept_errors on;
    fastcgi_ignore_client_abort off;
    fastcgi_connect_timeout 60;
    fastcgi_send_timeout 180;
    fastcgi_read_timeout 180;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 4 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
  }

  location = /favicon.ico {
    log_not_found off;
    access_log off;
  }

  location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
  }

  location ~ /\.ht {
    deny all;
  }

}

}
---

# rehash
# nginx –t

URLs:
https://ruhighload.com/Как+настроить+nginx+для+wordpress%3f

